{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport * as React from \"react\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\nimport { DEFAULT_AUTH_USER } from \"../constants/Consts\";\n\nvar authHandler = function authHandler(initialState) {\n  var _React$useState = React.useState(initialState),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      authUser = _React$useState2[0],\n      setAuthUser = _React$useState2[1];\n\n  var setAuthStatus = function setAuthStatus(authUser) {\n    return _regeneratorRuntime.async(function setAuthStatus$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"authUser\", JSON.stringify(authUser)));\n\n          case 3:\n            setAuthUser(authUser);\n            _context.next = 9;\n            break;\n\n          case 6:\n            _context.prev = 6;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 6]], Promise);\n  };\n\n  var updateAuthUserName = function updateAuthUserName(name) {\n    var newAuthUser;\n    return _regeneratorRuntime.async(function updateAuthUserName$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            newAuthUser = _objectSpread(_objectSpread({}, authUser), {}, {\n              name: name\n            });\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"authUser\", JSON.stringify(newAuthUser)));\n\n          case 4:\n            setAuthUser(newAuthUser);\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(_context2.t0);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  var updateAuthUserProfile = function updateAuthUserProfile(profile) {\n    var newAuthUser;\n    return _regeneratorRuntime.async(function updateAuthUserProfile$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            newAuthUser = _objectSpread(_objectSpread({}, authUser), {}, {\n              profile: profile\n            });\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"authUser\", JSON.stringify(newAuthUser)));\n\n          case 4:\n            setAuthUser(newAuthUser);\n            _context3.next = 10;\n            break;\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](0);\n            console.log(_context3.t0);\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  var updateAuthUserCVStatus = function updateAuthUserCVStatus() {\n    var newAuthUser;\n    return _regeneratorRuntime.async(function updateAuthUserCVStatus$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            newAuthUser = _objectSpread(_objectSpread({}, authUser), {}, {\n              hasCV: true\n            });\n            _context4.next = 4;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"authUser\", JSON.stringify(newAuthUser)));\n\n          case 4:\n            setAuthUser(newAuthUser);\n            _context4.next = 10;\n            break;\n\n          case 7:\n            _context4.prev = 7;\n            _context4.t0 = _context4[\"catch\"](0);\n            console.log(_context4.t0);\n\n          case 10:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  var setUnauthStatus = function setUnauthStatus() {\n    return _regeneratorRuntime.async(function setUnauthStatus$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.prev = 0;\n            _context5.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.removeItem(\"authUser\"));\n\n          case 3:\n            setAuthUser(DEFAULT_AUTH_USER);\n            _context5.next = 9;\n            break;\n\n          case 6:\n            _context5.prev = 6;\n            _context5.t0 = _context5[\"catch\"](0);\n            console.log(_context5.t0);\n\n          case 9:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, [[0, 6]], Promise);\n  };\n\n  return {\n    authUser: authUser,\n    updateAuthUserName: updateAuthUserName,\n    updateAuthUserProfile: updateAuthUserProfile,\n    updateAuthUserCVStatus: updateAuthUserCVStatus,\n    setAuthStatus: setAuthStatus,\n    setUnauthStatus: setUnauthStatus\n  };\n};\n\nexport default authHandler;","map":{"version":3,"sources":["/home/lekhu/Documents/David/Jobportal-Mobile-App/utils/custom-hooks/AuthHandler.js"],"names":["React","DEFAULT_AUTH_USER","authHandler","initialState","useState","authUser","setAuthUser","setAuthStatus","AsyncStorage","setItem","JSON","stringify","console","log","updateAuthUserName","name","newAuthUser","updateAuthUserProfile","profile","updateAuthUserCVStatus","hasCV","setUnauthStatus","removeItem"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { AsyncStorage } from \"react-native\";\n/** Utils */\nimport { DEFAULT_AUTH_USER } from \"../constants/Consts\";\n\nconst authHandler = (initialState) => {\n  const [authUser, setAuthUser] = React.useState(initialState);\n\n  const setAuthStatus = async (authUser) => {\n    try {\n      await AsyncStorage.setItem(\"authUser\", JSON.stringify(authUser));\n      setAuthUser(authUser);\n    } catch (e) {\n      // error reading value\n      console.log(e);\n    }\n  };\n\n   const updateAuthUserName = async (name) => {\n     try {\n       let newAuthUser = { ...authUser, name };\n       await AsyncStorage.setItem(\"authUser\", JSON.stringify(newAuthUser));\n       setAuthUser(newAuthUser);\n     } catch (e) {\n       console.log(e);\n     }\n   };\n\n      const updateAuthUserProfile = async (profile) => {\n        try {\n          let newAuthUser = { ...authUser , profile};\n          await AsyncStorage.setItem(\"authUser\", JSON.stringify(newAuthUser));\n          setAuthUser(newAuthUser);\n        } catch (e) {\n          console.log(e);\n        }\n      };\n\n       const updateAuthUserCVStatus = async () => {\n         try {\n           let newAuthUser = { ...authUser, hasCV: true };\n           await AsyncStorage.setItem(\"authUser\", JSON.stringify(newAuthUser));\n           setAuthUser(newAuthUser);\n         } catch (e) {\n           console.log(e);\n         }\n       };\n\n  const setUnauthStatus = async () => {\n    try {\n      await AsyncStorage.removeItem(\"authUser\");\n      setAuthUser(DEFAULT_AUTH_USER);\n    } catch(e) {\n      console.log(e);\n    }\n  };\n\n  return {\n    authUser,\n    updateAuthUserName,\n    updateAuthUserProfile,\n    updateAuthUserCVStatus,\n    setAuthStatus,\n    setUnauthStatus,\n  };\n};\nexport default authHandler;\n"]},"metadata":{},"sourceType":"module"}